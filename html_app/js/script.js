(()=>{"use strict";var e={639:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AppScreen=void 0;const i=a(569),s=a(927);t.AppScreen=class{constructor(e){this.storage=e}remove(){document.getElementById("upperMenu_btn01").removeEventListener("click",(e=>this.upperMenuBtn_click(e))),document.getElementById("upperMenu_lbl01").remove(),document.getElementById("upperMenu_br01").remove(),document.getElementById("upperMenu_btn01").remove()}makeExit(e){var t,a=document.getElementById("upperField");(t=document.createElement("label")).innerHTML=e,t.style.display="inline-block",t.style.padding="1em",t.setAttribute("id","upperMenu_lbl01"),t.setAttribute("class","lblHeader"),a.appendChild(t),(t=document.createElement("br")).setAttribute("id","upperMenu_br01"),a.appendChild(t),(t=document.createElement("button")).innerHTML='<img src="assets/gameGeneral/closeBtn.png" />',t.setAttribute("id","upperMenu_btn01"),t.addEventListener("click",(e=>this.upperMenuBtn_click(e))),a.appendChild(t);const i=document.querySelector("#upperMenu_btn01 img");i&&(i.style.width="100%",i.style.height="100%",i.style.objectFit="cover")}upperMenuBtn_click(e){this.remove(),this.storage.gameScreen=i.Screens.default_menu,this.storage.toChangeScreen=!0,(0,s.mediator)()}screen(){console.log("hi0")}}},510:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AppStorage=void 0;const i=a(569);t.AppStorage=class{constructor(){this.gameScreen=i.Screens.default_menu,this.mainField=document.getElementById("mainField"),this.special=new Array,this.toChangeScreen=!0}findSpecialById(e){for(var t=0;t<this.special.length;t++)if(this.special[t].id==e)return t;return-1}removeFromSpecialById(e){const t=this.findSpecialById(e);console.log("name:"+e+"; res:"+t),t>=0&&this.special.splice(t,1)}}},741:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultScreen=void 0;const i=a(569),s=a(639),r=a(927);class n extends s.AppScreen{remove(){console.log("DefaultScreen::remove"),document.getElementById("defaultMenu_divChooser").removeEventListener("click",(e=>this.divDefault_Chooser_click(e))),document.getElementById("defaultMenu_btnGameName").removeEventListener("click",(e=>this.defaultMenu_btnGameName_click(e))),document.getElementById("defaultMenu_lblHeader").remove(),document.getElementById("defaultMenu_divHeader").remove();var e=this.storage.special[this.storage.findSpecialById("defImgs")].value;for(let t=0;t<e.length;t++)document.getElementById(t.toString()).remove();document.getElementById("defaultMenu_divChooser").remove(),document.getElementById("defaultMenu_lblGameName").remove(),document.getElementById("defaultMenu_btnGameName").remove(),document.getElementById("defaultMenu_divGameStart").remove(),this.storage.removeFromSpecialById("gameList"),this.storage.removeFromSpecialById("gameScreenChoice"),this.storage.removeFromSpecialById("defImgs")}defaultMenu_btnGameName_click(e){var t=this.storage.special[this.storage.findSpecialById("gameScreenChoice")].value;console.log("screen:"+t),this.remove(),this.storage.gameScreen=t,this.storage.toChangeScreen=!0,(0,r.mediator)()}divDefault_ChooseGame_screen(e){document.getElementById("defaultMenu_divGameStart").style.display="block",document.getElementById("defaultMenu_lblGameName").innerHTML="Game:"+e.name+". ",document.getElementById("defaultMenu_btnGameName").innerHTML="Start the game"}divDefault_Chooser_click(e){console.log("divDefault_Chooser_click");const t=e.target;var a=Number(t.id),i=this.storage.special[this.storage.findSpecialById("gameList")].value;console.log(i),this.storage.special[this.storage.findSpecialById("gameScreenChoice")].value=i[a].screen,console.log(i[a].screen),this.divDefault_ChooseGame_screen(i[a])}screen(){console.log("DefaultScreen::screen:"+this.storage.gameScreen);var e=new Array;e.push({screen:i.Screens.sapper_menu,name:"Lazy Sapper",bigIcon:"sapper_bigIcon.png"}),e.push({screen:i.Screens.tictactoe5_menu,name:"Tic-Tak-Toe-Five",bigIcon:"tictaktoe5_bigIcon.png"}),this.storage.special.push({id:"gameList",value:e});var t,a,s,r=this.storage.special[this.storage.findSpecialById("gameList")].value;this.storage.special.push({id:"gameScreenChoice",value:i.Screens.no}),(t=document.createElement("div")).setAttribute("id","defaultMenu_divHeader"),(a=document.createElement("label")).textContent="Choose the game to see what it is:",a.setAttribute("id","defaultMenu_lblHeader"),a.setAttribute("class","lblHeader"),t.appendChild(a),this.storage.mainField.appendChild(t),(t=document.createElement("div")).setAttribute("id","defaultMenu_divChooser"),t.addEventListener("click",(e=>this.divDefault_Chooser_click(e)));var n=new Array(r.length);for(let e=0;e<r.length;e++)(s=new Image).src="assets/gameGeneral/"+r[e].bigIcon,s.style.left=t.style.left+"px",s.setAttribute("id",e),s.style.border="1px solid black",t.appendChild(s),n[e]=s,t.appendChild(s);this.storage.special.push({id:"defImgs",value:n}),this.storage.mainField.appendChild(t),(t=document.createElement("div")).setAttribute("id","defaultMenu_divGameStart"),t.style.display="none",(a=document.createElement("label")).setAttribute("id","defaultMenu_lblGameName"),t.appendChild(a),(a=document.createElement("button")).setAttribute("id","defaultMenu_btnGameName"),a.addEventListener("click",(e=>this.defaultMenu_btnGameName_click(e))),t.appendChild(a),this.storage.mainField.appendChild(t)}}t.DefaultScreen=n},927:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mediator=void 0;const i=a(569),s=a(510),r=a(140),n=a(131),l=a(808),c=a(143),o=a(741),d=new class{constructor(){this.storage=new s.AppStorage}gameManager(){if(this.storage.toChangeScreen)switch(this.storage.toChangeScreen=!1,this.storage.gameScreen){case i.Screens.default_menu:this.appScreen=new o.DefaultScreen(this.storage),this.appScreen.screen();break;case i.Screens.tictactoe5_menu:this.appScreen=new l.Tictactoe5MenuScreen(this.storage),this.appScreen.screen();break;case i.Screens.tictactoe5_game:this.appScreen=new c.Tictactoe5Screen(this.storage),this.appScreen.screen();break;case i.Screens.sapper_menu:this.appScreen=new r.SapperMenuScreen(this.storage),this.appScreen.screen();break;case i.Screens.sapper_game:this.appScreen=new n.SapperScreen(this.storage),this.appScreen.screen();break;default:alert("no screen")}}};t.mediator=function(){console.log("back to gameManager"),d.gameManager()},document.addEventListener("DOMContentLoaded",(function(){d.gameManager()}))},140:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SapperMenuScreen=void 0;const i=a(569),s=a(639),r=a(927);class n extends s.AppScreen{sapperMenu_chooseMode(e,t){console.log("sapperMenu_chooseMode"),this.storage.special[this.storage.findSpecialById("fieldSize")].value=e,this.storage.special[this.storage.findSpecialById("sapperTarget")].value=t,document.getElementById("sapperMenu_lbl01").innerHTML="Game field size:"+e}sapperMenu_btn01_click(e,t,a){console.log("sapperMenu_btn01_click:"+t+":"+a),this.sapperMenu_chooseMode(t,a)}remove(){console.log("remove SapperMenuScreen::screen:"+this.storage.gameScreen),super.remove(),document.getElementById("sapperMenu_btn00").removeEventListener("click",(e=>this.sapperMenu_btn01_click(e,9,10))),document.getElementById("sapperMenu_btn00").removeEventListener("click",(e=>this.sapperMenu_btn01_click(e,16,40))),document.getElementById("sapperMenu_btn00").removeEventListener("click",(e=>this.sapperMenu_btn01_click(e,25,80))),document.getElementById("sapperMenu_btn03").removeEventListener("click",(e=>this.sapperMenu_btn00_click(e))),document.getElementById("sapperMenu_btn00").remove(),document.getElementById("sapperMenu_btn01").remove(),document.getElementById("sapperMenu_btn02").remove(),document.getElementById("sapperMenu_btn03").remove(),document.getElementById("sapperMenu_lbl01").remove(),document.getElementById("sapperMenu_div01").remove(),document.getElementById("sapperMenu_div02").remove(),document.getElementById("sapperMenu_div03").remove()}sapperMenu_btn00_click(e){console.log("sapperMenu_btn00_click"),this.remove(),this.storage.gameScreen=i.Screens.sapper_game,this.storage.toChangeScreen=!0,(0,r.mediator)()}screen(){console.log("SapperMenuScreen::screen:"+this.storage.gameScreen),this.makeExit("Lazy Sapper"),this.storage.special.push({id:"sapperTarget",value:10}),this.storage.special.push({id:"fieldSize",value:9});var e,t,a=this.storage.findSpecialById("fieldSize");(e=document.createElement("div")).setAttribute("id","sapperMenu_div01"),(t=document.createElement("button")).textContent="9x9",t.setAttribute("id","sapperMenu_btn01"),t.setAttribute("class","btn1"),t.addEventListener("click",(e=>this.sapperMenu_btn01_click(e,9,10))),e.appendChild(t),(t=document.createElement("button")).textContent="16x16",t.setAttribute("id","sapperMenu_btn02"),t.setAttribute("class","btn1"),t.addEventListener("click",(e=>this.sapperMenu_btn01_click(e,16,40))),e.appendChild(t),(t=document.createElement("button")).textContent="25x25",t.setAttribute("id","sapperMenu_btn03"),t.setAttribute("class","btn1"),t.addEventListener("click",(e=>this.sapperMenu_btn01_click(e,25,80))),e.appendChild(t),this.storage.mainField.appendChild(e),(e=document.createElement("div")).setAttribute("id","sapperMenu_div02"),(t=document.createElement("label")).setAttribute("id","sapperMenu_lbl01"),t.setAttribute("class","lbl1"),t.innerHTML="Game field size:"+this.storage.special[a].value,e.appendChild(t),this.storage.mainField.appendChild(e),(e=document.createElement("div")).setAttribute("id","sapperMenu_div03"),(t=document.createElement("button")).textContent="Start the game",t.setAttribute("id","sapperMenu_btn00"),t.setAttribute("class","btn2"),t.addEventListener("click",(e=>this.sapperMenu_btn00_click(e))),e.appendChild(t),this.storage.mainField.appendChild(e)}}t.SapperMenuScreen=n},131:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SapperScreen=void 0;const i=a(569),s=a(639),r=a(927);class n extends s.AppScreen{remove(){console.log("remove SapperScreen::screen:"+this.storage.gameScreen),super.remove(),document.getElementById("btnSapper_chooseFlag").removeEventListener("click",(e=>this.btnSapper_chooseFlag_click(e))),document.getElementById("btnSapper_chooseOpenField").removeEventListener("click",(e=>this.btnSapper_chooseOpenField_click(e))),document.getElementById("btnSapper_exit").removeEventListener("click",(e=>this.divSapper_gameField_click(e))),document.getElementById("btnSapper_restart").removeEventListener("click",(e=>this.btnSapper_exit_click(e))),document.getElementById("divSapper_gameField").removeEventListener("click",(e=>this.btnSapper_restart_click(e))),document.getElementById("btnSapper_chooseFlag").remove(),document.getElementById("btnSapper_chooseOpenField").remove(),document.getElementById("lblSapper_MinesLeft").remove(),document.getElementById("div01").remove();var e=this.storage.special[this.storage.findSpecialById("imgs")].value;for(let t=0;t<e.length;t++)document.getElementById(t.toString()).remove();document.getElementById("divSapper_gameField").remove(),document.getElementById("btnSapper_exit").remove(),document.getElementById("btnSapper_restart").remove(),document.getElementById("divSapper_menu").remove(),this.storage.removeFromSpecialById("clickMode"),this.storage.removeFromSpecialById("fieldSize"),this.storage.removeFromSpecialById("sapperTarget"),this.storage.removeFromSpecialById("userTargetsLeft"),this.storage.removeFromSpecialById("sapperFirstTurn"),this.storage.removeFromSpecialById("imgHH"),this.storage.removeFromSpecialById("imgWW"),this.storage.removeFromSpecialById("imgs"),this.storage.removeFromSpecialById("gameinf"),this.storage.removeFromSpecialById("gameStatus")}btnSapper_exit_click(e){console.log("btnSapper_exit_click"),this.remove(),this.storage.gameScreen=i.Screens.sapper_menu,this.storage.toChangeScreen=!0,(0,r.mediator)()}btnSapper_restart_click(e){console.log("btnSapper_restart_click");var t=this.storage.special[this.storage.findSpecialById("fieldSize")].value,a=this.storage.special[this.storage.findSpecialById("sapperTarget")].value;this.remove(),this.storage.special.push({id:"fieldSize",value:t}),this.storage.special.push({id:"sapperTarget",value:a}),this.storage.toChangeScreen=!0,(0,r.mediator)()}btnSapper_chooseFlag_click(e){console.log("btnSapper_chooseFlag_click"),this.storage.special[this.storage.findSpecialById("clickMode")].value=2,document.getElementById("btnSapper_chooseFlag").style.background="#00FF00",document.getElementById("btnSapper_chooseOpenField").style.background="#DDDDDD"}btnSapper_chooseOpenField_click(e){console.log("btnSapper_chooseOpenField_click"),this.storage.special[this.storage.findSpecialById("clickMode")].value=1,document.getElementById("btnSapper_chooseFlag").style.background="#DDDDDD",document.getElementById("btnSapper_chooseOpenField").style.background="#00FF00"}fillSapperGameField(e){var t=this.storage.special[this.storage.findSpecialById("fieldSize")].value,a=new Array(t*t);a.fill(0);for(var i=this.storage.special[this.storage.findSpecialById("sapperTarget")].value;i>0;){var s=Math.floor(Math.random()*t*t);0==a[s]&&s!=e&&(a[s]=1,i--)}this.storage.special.push({id:"gameinf",value:a})}sapperCheckBombAround(e){var t=0,a=this.storage.special[this.storage.findSpecialById("fieldSize")].value;return e-(a+1)>=0&&Math.floor(e/a)!=Math.ceil(e/a)&&(1!=this.storage.special[this.storage.findSpecialById("gameinf")].value[e-(a+1)]&&4!=this.storage.special[this.storage.findSpecialById("gameinf")].value[e-(a+1)]||t++),e-a>=0&&(1!=this.storage.special[this.storage.findSpecialById("gameinf")].value[e-a]&&4!=this.storage.special[this.storage.findSpecialById("gameinf")].value[e-a]||t++),e-(a-1)>=0&&Math.floor((e+1)/a)!=Math.ceil((e+1)/a)&&(1!=this.storage.special[this.storage.findSpecialById("gameinf")].value[e-(a-1)]&&4!=this.storage.special[this.storage.findSpecialById("gameinf")].value[e-(a-1)]||t++),e-1>=0&&Math.floor(e/a)!=Math.ceil(e/a)&&(1!=this.storage.special[this.storage.findSpecialById("gameinf")].value[e-1]&&4!=this.storage.special[this.storage.findSpecialById("gameinf")].value[e-1]||t++),e+1<a*a&&Math.floor((e+1)/a)!=Math.ceil((e+1)/a)&&(1!=this.storage.special[this.storage.findSpecialById("gameinf")].value[e+1]&&4!=this.storage.special[this.storage.findSpecialById("gameinf")].value[e+1]||t++),e+(a-1)<a*a&&Math.floor(e/a)!=Math.ceil(e/a)&&(1!=this.storage.special[this.storage.findSpecialById("gameinf")].value[e+(a-1)]&&4!=this.storage.special[this.storage.findSpecialById("gameinf")].value[e+(a-1)]||t++),e+a<a*a&&(1!=this.storage.special[this.storage.findSpecialById("gameinf")].value[e+a]&&4!=this.storage.special[this.storage.findSpecialById("gameinf")].value[e+a]||t++),e+(a+1)<a*a&&Math.floor((e+1)/a)!=Math.ceil((e+1)/a)&&(1!=this.storage.special[this.storage.findSpecialById("gameinf")].value[e+(a+1)]&&4!=this.storage.special[this.storage.findSpecialById("gameinf")].value[e+(a+1)]||t++),t}changeSapperImgByCount(e,t){var a=this.storage.special[this.storage.findSpecialById("imgs")].value,i=new Image;switch(i=a[t],e){case-1:i.src="assets/gameSapper/sapper_img01.png";break;case-2:i.src="assets/gameSapper/sapper_img02.png";break;case-4:i.src="assets/gameSapper/sapper_img04.png";break;case-5:i.src="assets/gameSapper/sapper_img05.png";break;case-6:i.src="assets/gameSapper/sapper_img06.png";break;case-7:i.src="assets/gameSapper/sapper_img07.png";break;case 0:i.src="assets/gameSapper/sapper_img03.png";break;case 1:i.src="assets/gameSapper/sapper_img11.png";break;case 2:i.src="assets/gameSapper/sapper_img12.png";break;case 3:i.src="assets/gameSapper/sapper_img13.png";break;case 4:i.src="assets/gameSapper/sapper_img14.png";break;case 5:i.src="assets/gameSapper/sapper_img15.png";break;case 6:i.src="assets/gameSapper/sapper_img16.png";break;case 7:i.src="assets/gameSapper/sapper_img17.png";break;case 8:i.src="assets/gameSapper/sapper_img18.png"}}sapperLogic(e){var t=new Array;for(t.push(e);t.length>0;){var a=this.sapperCheckBombAround(t[0]);if(0==a){var i=this.storage.special[this.storage.findSpecialById("fieldSize")].value;t[0]-(i+1)>=0&&Math.floor(t[0]/i)!=Math.ceil(t[0]/i)&&0==this.storage.special[this.storage.findSpecialById("gameinf")].value[t[0]-(i+1)]&&t.push(t[0]-(i+1)),t[0]-i>=0&&0==this.storage.special[this.storage.findSpecialById("gameinf")].value[t[0]-i]&&t.push(t[0]-i),t[0]-(i-1)>=0&&Math.floor((t[0]+1)/i)!=Math.ceil((t[0]+1)/i)&&0==this.storage.special[this.storage.findSpecialById("gameinf")].value[t[0]-(i-1)]&&t.push(t[0]-(i-1)),t[0]-1>=0&&Math.floor(t[0]/i)!=Math.ceil(t[0]/i)&&0==this.storage.special[this.storage.findSpecialById("gameinf")].value[t[0]-1]&&t.push(t[0]-1),t[0]+1<i*i&&Math.floor((t[0]+1)/i)!=Math.ceil((t[0]+1)/i)&&0==this.storage.special[this.storage.findSpecialById("gameinf")].value[t[0]+1]&&t.push(t[0]+1),t[0]+(i-1)<i*i&&Math.floor(t[0]/i)!=Math.ceil(t[0]/i)&&0==this.storage.special[this.storage.findSpecialById("gameinf")].value[t[0]+(i-1)]&&t.push(t[0]+(i-1)),t[0]+i<i*i&&0==this.storage.special[this.storage.findSpecialById("gameinf")].value[t[0]+i]&&t.push(t[0]+i),t[0]+(i+1)<i*i&&Math.floor((t[0]+1)/i)!=Math.ceil((t[0]+1)/i)&&0==this.storage.special[this.storage.findSpecialById("gameinf")].value[t[0]+(i+1)]&&t.push(t[0]+(i+1))}this.storage.special[this.storage.findSpecialById("gameinf")].value[t[0]]=2,this.changeSapperImgByCount(a,t[0]),t.splice(0,1)}}sapper_flagAddDelete(e){var t=this.storage.special[this.storage.findSpecialById("userTargetsLeft")];1==e?t.value++:t.value--,document.getElementById("lblSapper_MinesLeft").innerHTML="Mines:"+t.value+". "}sapper_checkWin(){for(var e=this.storage.special[this.storage.findSpecialById("gameinf")].value,t=!0,a=0;a<e.length;a++)if(0==e[a]||1==e[a]||3==e[a]){t=!1;break}if(t){this.storage.special[this.storage.findSpecialById("gameStatus")].value=-2;var i=document.getElementById("divSapper_menu"),s=document.createTextNode("Congratulations! You win!");i.appendChild(s)}}divSapper_gameField_click(e){if(console.log("mainField click"),this.storage.special[this.storage.findSpecialById("gameStatus")].value<=0)return;const t=e.target;var a=Number(t.id);this.storage.special[this.storage.findSpecialById("sapperFirstTurn")].value&&(this.storage.special[this.storage.findSpecialById("sapperFirstTurn")].value=!1,this.fillSapperGameField(a));var i=this.storage.special[this.storage.findSpecialById("gameinf")].value,s=this.storage.special[this.storage.findSpecialById("clickMode")].value;switch(i[a]){case 0:1==s?this.sapperLogic(a):(this.changeSapperImgByCount(-2,a),this.storage.special[this.storage.findSpecialById("gameinf")].value[a]=3,this.sapper_flagAddDelete(0));break;case 3:1==s?this.sapperLogic(a):(this.changeSapperImgByCount(-1,a),this.storage.special[this.storage.findSpecialById("gameinf")].value[a]=0,this.sapper_flagAddDelete(1));break;case 1:if(1==s){this.changeSapperImgByCount(-4,a),this.storage.special[this.storage.findSpecialById("gameinf")].value[a]=5,this.storage.special[this.storage.findSpecialById("gameStatus")].value=-1;var r=document.getElementById("divSapper_menu"),n=document.createTextNode("You found a bomb!");r.appendChild(n);for(var l=0;l<i.length;l++)switch(i[l]){case 0:this.changeSapperImgByCount(0,l);break;case 1:this.changeSapperImgByCount(-5,l);break;case 3:this.changeSapperImgByCount(-7,l);break;case 4:this.changeSapperImgByCount(-6,l)}}else this.changeSapperImgByCount(-2,a),this.storage.special[this.storage.findSpecialById("gameinf")].value[a]=4,this.sapper_flagAddDelete(0);break;case 4:if(1==s)for(this.changeSapperImgByCount(-4,a),this.storage.special[this.storage.findSpecialById("gameinf")].value[a]=5,this.storage.special[this.storage.findSpecialById("gameStatus")].value=-1,r=document.getElementById("divSapper_menu"),n=document.createTextNode("You found a bomb!"),r.appendChild(n),l=0;l<i.length;l++)switch(i[l]){case 0:this.changeSapperImgByCount(0,l);break;case 1:this.changeSapperImgByCount(-5,l);break;case 3:this.changeSapperImgByCount(-7,l);break;case 4:this.changeSapperImgByCount(-6,l)}else this.changeSapperImgByCount(-1,a),this.storage.special[this.storage.findSpecialById("gameinf")].value[a]=1,this.sapper_flagAddDelete(1);break;case 2:break;default:alert("no actions")}this.sapper_checkWin()}screen(){console.log("SapperScreen::screen:"+this.storage.gameScreen),this.makeExit("Lazy Sapper");var e=this.storage.special[this.storage.findSpecialById("fieldSize")].value;this.storage.special.push({id:"clickMode",value:1}),this.storage.special.push({id:"gameStatus",value:e});var t,a,i=this.storage.special[this.storage.findSpecialById("sapperTarget")].value;this.storage.special.push({id:"userTargetsLeft",value:i}),this.storage.special.push({id:"sapperFirstTurn",value:!0}),(t=document.createElement("div")).setAttribute("id","div01"),(a=document.createElement("label")).setAttribute("id","lblSapper_MinesLeft"),a.innerHTML="Mines:"+i+". ",t.appendChild(a),a=document.createTextNode("Choose:"),t.appendChild(a),(a=document.createElement("button")).innerHTML='<img src="assets/gameSapper/sapper_img02.png" />',a.setAttribute("id","btnSapper_chooseFlag"),a.addEventListener("click",(e=>this.btnSapper_chooseFlag_click(e))),t.appendChild(a),(a=document.createElement("button")).style.background="#00FF00",a.innerHTML='<img src="assets/gameSapper/sapper_img03.png" />',a.setAttribute("id","btnSapper_chooseOpenField"),a.addEventListener("click",(e=>this.btnSapper_chooseOpenField_click(e))),t.appendChild(a),this.storage.mainField.appendChild(t),(t=document.createElement("div")).style.lineHeight="0em",t.setAttribute("id","divSapper_gameField"),t.addEventListener("click",(e=>this.divSapper_gameField_click(e)));var s,r,n=new Array(e*e);for(let a=0;a<e*e;a++){if(void 0===r||r>=e-1){var l=document.createElement("br");t.appendChild(l),r=0}else r++;(s=new Image).src="assets/gameSapper/sapper_img01.png",s.style.left=t.style.left+r*a+"px",s.setAttribute("id",a),t.appendChild(s),n[a]=s,t.appendChild(s)}this.storage.special.push({id:"imgs",value:n}),s.onload=()=>{this.storage.special.push({id:"imgHH",value:s.height}),this.storage.special.push({id:"imgWW",value:s.width})},this.storage.mainField.appendChild(t),(t=document.createElement("div")).setAttribute("id","divSapper_menu"),(a=document.createElement("button")).textContent="exit",a.setAttribute("id","btnSapper_exit"),a.addEventListener("click",(e=>this.btnSapper_exit_click(e))),t.appendChild(a),(a=document.createElement("button")).textContent="restart",a.setAttribute("id","btnSapper_restart"),a.addEventListener("click",(e=>this.btnSapper_restart_click(e))),t.appendChild(a),this.storage.mainField.appendChild(t)}}t.SapperScreen=n},569:(e,t)=>{var a;Object.defineProperty(t,"__esModule",{value:!0}),t.Screens=void 0,function(e){e[e.default_menu=0]="default_menu",e[e.tictactoe5_menu=1]="tictactoe5_menu",e[e.tictactoe5_game=2]="tictactoe5_game",e[e.sapper_menu=3]="sapper_menu",e[e.sapper_game=4]="sapper_game",e[e.no=5]="no"}(a||(t.Screens=a={}))},322:function(e,t,a){var i=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))((function(s,r){function n(e){try{c(i.next(e))}catch(e){r(e)}}function l(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,l)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AI=void 0;const s=a(472);t.AI=class{constructor(e){this.storage=e}changeImgByCount(e,t){var a=this.storage.special[this.storage.findSpecialById("imgs")].value,i=new Image;switch(i=a[t],e){case s.FieldValue.empty:i.src="assets/gameTictaktoe5/ttt5_img01.png";break;case s.FieldValue.playerX:i.src="assets/gameTictaktoe5/ttt5_img02.png";break;case s.FieldValue.playerXwin:i.src="assets/gameTictaktoe5/ttt5_img04.png";break;case s.FieldValue.playerY:i.src="assets/gameTictaktoe5/ttt5_img03.png";break;case s.FieldValue.playerYwin:i.src="assets/gameTictaktoe5/ttt5_img05.png"}}AITurn_FieldCounting(e,t,a){for(var i,s=new Array,r=0;r<e.length;r++){i=!1;for(var n=0;n<s.length;n++)if(s[n].item==e[r]){s[n].count++,i=!0;break}i||s.push({item:e[r],count:1})}var l=0,c=new Array;for(r=0;r<s.length;r++)s[r].count==l&&c.push(s[r].item),s[r].count>l&&(l=s[r].count,c.push(s[r].item));if(c.length>0){var o=Math.floor(Math.random()*c.length);return this.storage.special[this.storage.findSpecialById("gameinf")].value[c[o]]=t,this.changeImgByCount(a,c[o]),!0}return!1}AITurn_GamerBewareOf(e){for(var t,a,i=this.storage.special[this.storage.findSpecialById("gameinf")].value,r=this.storage.special[this.storage.findSpecialById("fieldSize")].value,n=new Array,l=0;l<i.length;l++)if(-1!=i[l])for(var c=-4;c<=0;c++){a=!1,t=0;for(var o=l+c;o<=l+c+4;o++){if(!this.AITurn_FieldCheck(o,!0,-1,l+c,l+c+4)){a=!0;break}t+=i[o]}if(!a&&t>=e)for(o=l+c;o<=l+c+4;o++)0==i[o]&&n.push(o);for(a=!1,t=0,o=l+c*r;o<=l+(c+4)*r;o+=r){if(!this.AITurn_FieldCheck(o,!1,-1)){a=!0;break}t+=i[o]}if(!a&&t>=e)for(o=l+c*r;o<=l+(c+4)*r;o+=r)0==i[o]&&n.push(o);for(a=!1,t=0,o=l+c*r-4;o<=l+(c+4)*r;o+=r+1){if(!this.AITurn_FieldCheck(o,!0,-1,l+c*r-4,l+(c+4)*r)){a=!0;break}t+=i[o]}if(!a&&t>=e)for(o=l+c*r-4;o<=l+(c+4)*r;o+=r+1)0==i[o]&&n.push(o);for(a=!1,t=0,o=l-c*r-4;o<=l-(c+4)*r;o-=r-1){if(!this.AITurn_FieldCheck(o,!0,-1,l-c*r-4,l-(c+4)*r)){a=!0;break}t+=i[o]}if(!a&&t>=e)for(o=l-c*r-4;o<=l-(c+4)*r;o-=r-1)0==i[o]&&n.push(o)}return this.AITurn_FieldCounting(n,-1,s.FieldValue.playerY)}AITurn_AINotLessThan(e){for(var t,a,i=this.storage.special[this.storage.findSpecialById("gameinf")].value,r=this.storage.special[this.storage.findSpecialById("fieldSize")].value,n=new Array,l=0;l<i.length;l++)if(1!=i[l])for(var c=-4;c<=0;c++){a=!1,t=0;for(var o=l+c;o<=l+c+4;o++){if(!this.AITurn_FieldCheck(o,!0,1,l+c,l+c+4)){a=!0;break}t-=i[o]}if(!a&&t>=e)for(o=l+c;o<=l+c+4;o++)0==i[o]&&n.push(o);for(a=!1,t=0,o=l+c*r;o<=l+(c+4)*r;o+=r){if(!this.AITurn_FieldCheck(o,!1,1)){a=!0;break}t-=i[o]}if(!a&&t>=e)for(o=l+c*r;o<=l+(c+4)*r;o+=r)0==i[o]&&n.push(o);for(a=!1,t=0,o=l+c*r-4;o<=l+(c+4)*r;o+=r+1){if(!this.AITurn_FieldCheck(o,!0,1,l+c*r-4,l+(c+4)*r)){a=!0;break}t-=i[o]}if(!a&&t>=e)for(o=l+c*r-4;o<=l+(c+4)*r;o+=r+1)0==i[o]&&n.push(o);for(a=!1,t=0,o=l-c*r-4;o<=l-(c+4)*r;o-=r-1){if(!this.AITurn_FieldCheck(o,!0,1,l-c*r-4,l-(c+4)*r)){a=!0;break}t-=i[o]}if(!a&&t>=e)for(o=l-c*r-4;o<=l-(c+4)*r;o-=r-1)0==i[o]&&n.push(o)}return this.AITurn_FieldCounting(n,-1,s.FieldValue.playerY)}AITurn_FieldCheck(e,t,a=1,i=0,s=0){var r=this.storage.special[this.storage.findSpecialById("gameinf")].value,n=this.storage.special[this.storage.findSpecialById("fieldSize")].value;return!(e<0||e>=r.length||t&&e!=i&&Math.floor(e/n)==Math.ceil(e/n)||t&&e!=s&&Math.floor((e+1)/n)==Math.ceil((e+1)/n)||r[e]==a)}AITurn_AINo(){for(var e=this.storage.special[this.storage.findSpecialById("gameinf")].value,t=this.storage.special[this.storage.findSpecialById("fieldSize")].value,a=0,i=0,r=0,n=new Array,l=0;l<e.length;l++)if(0==e[l]){i=0;for(var c=-4;c<=0;c++){r=0;for(var o=l+c;o<=l+c+4;o++)this.AITurn_FieldCheck(o,!0,1,l+c,l+c+4)&&r++;for(r>=5&&i++,r=0,o=l+c*t;o<=l+(c+4)*t;o+=t)this.AITurn_FieldCheck(o,!1,1)&&r++;for(r>=5&&i++,r=0,o=l+c*t-4;o<=l+(c+4)*t;o+=t+1)this.AITurn_FieldCheck(o,!0,1,l+c*t-4,l+(c+4)*t)&&r++;for(r>=5&&i++,r=0,o=l-c*t-4;o<=l-(c+4)*t;o-=t-1)this.AITurn_FieldCheck(o,!0,1,l-c*t-4,l-(c+4)*t)&&r++;r>=5&&i++}i==a&&n.push(l),i>a&&(a=i,(n=new Array).push(l))}if(0==n.length)for(l=0;l<e.length;l++)0==e[l]&&n.push(l);var d=Math.floor(Math.random()*n.length);return this.storage.special[this.storage.findSpecialById("gameinf")].value[n[d]]=-1,this.changeImgByCount(s.FieldValue.playerY,n[d]),!0}AITurn(){return i(this,void 0,void 0,(function*(){yield function(e){return i(this,void 0,void 0,(function*(){return new Promise((t=>setTimeout((()=>t()),e)))}))}(500+Math.floor(1500*Math.random()));var e=!1;e||(e=this.AITurn_AINotLessThan(4)),e||(e=this.AITurn_GamerBewareOf(4)),e||(e=this.AITurn_AINotLessThan(3)),e||(e=this.AITurn_GamerBewareOf(3)),e||(e=this.AITurn_AINotLessThan(2)),e||(e=this.AITurn_AINotLessThan(1)),e||(e=this.AITurn_AINo())}))}}},472:(e,t)=>{var a;Object.defineProperty(t,"__esModule",{value:!0}),t.FieldValue=void 0,function(e){e[e.empty=0]="empty",e[e.playerX=1]="playerX",e[e.playerXwin=2]="playerXwin",e[e.playerY=3]="playerY",e[e.playerYwin=4]="playerYwin"}(a||(t.FieldValue=a={}))},808:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tictactoe5MenuScreen=void 0;const i=a(569),s=a(639),r=a(927);class n extends s.AppScreen{ttt5Menu_btn01_click(e,t){console.log("ttt5Menu_btn01_click:"+t),this.storage.special[this.storage.findSpecialById("fieldSize")].value=t,document.getElementById("ttt5Menu_lbl01").innerHTML="Game field size:"+t}remove(){super.remove(),document.getElementById("ttt5Menu_btn01").removeEventListener("click",(e=>this.ttt5Menu_btn01_click(e,15))),document.getElementById("ttt5Menu_btn02").removeEventListener("click",(e=>this.ttt5Menu_btn01_click(e,25))),document.getElementById("ttt5Menu_btn00").removeEventListener("click",(e=>this.ttt5Menu_btn00_click(e))),document.getElementById("ttt5Menu_btn00").remove(),document.getElementById("ttt5Menu_btn01").remove(),document.getElementById("ttt5Menu_btn02").remove(),document.getElementById("ttt5Menu_lbl01").remove(),document.getElementById("ttt5Menu_div01").remove(),document.getElementById("ttt5Menu_div02").remove(),document.getElementById("ttt5Menu_div03").remove()}ttt5Menu_btn00_click(e){console.log("ttt5Menu_btn00_click"),this.remove(),this.storage.gameScreen=i.Screens.tictactoe5_game,this.storage.toChangeScreen=!0,(0,r.mediator)()}screen(){console.log("TicTakToo5Screen::screen:"+this.storage.gameScreen),this.makeExit("Tic-Tak-Toe Five"),this.storage.special.push({id:"fieldSize",value:15});var e,t,a=this.storage.findSpecialById("fieldSize");(e=document.createElement("div")).setAttribute("id","ttt5Menu_div01"),(t=document.createElement("button")).textContent="15",t.setAttribute("id","ttt5Menu_btn01"),t.setAttribute("class","btn1"),t.addEventListener("click",(e=>this.ttt5Menu_btn01_click(e,15))),e.appendChild(t),(t=document.createElement("button")).textContent="25",t.setAttribute("id","ttt5Menu_btn02"),t.setAttribute("class","btn1"),t.addEventListener("click",(e=>this.ttt5Menu_btn01_click(e,25))),e.appendChild(t),this.storage.mainField.appendChild(e),(e=document.createElement("div")).setAttribute("id","ttt5Menu_div02"),(t=document.createElement("label")).setAttribute("id","ttt5Menu_lbl01"),t.setAttribute("class","lbl1"),t.innerHTML="Game field size:"+this.storage.special[a].value,e.appendChild(t),this.storage.mainField.appendChild(e),(e=document.createElement("div")).setAttribute("id","ttt5Menu_div03"),(t=document.createElement("button")).textContent="Start the game",t.setAttribute("id","ttt5Menu_btn00"),t.setAttribute("class","btn2"),t.addEventListener("click",(e=>this.ttt5Menu_btn00_click(e))),e.appendChild(t),this.storage.mainField.appendChild(e)}}t.Tictactoe5MenuScreen=n},143:function(e,t,a){var i=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))((function(s,r){function n(e){try{c(i.next(e))}catch(e){r(e)}}function l(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,l)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Tictactoe5Screen=void 0;const s=a(569),r=a(639),n=a(472),l=a(322),c=a(927);class o extends r.AppScreen{remove(){super.remove(),document.getElementById("divTtt5_gameField").removeEventListener("click",(e=>this.divTtt5_gameField_click(e))),document.getElementById("btnTtt5_exit").removeEventListener("click",(e=>this.btnTtt5_exit_click(e))),document.getElementById("btnTtt5_restart").removeEventListener("click",(e=>this.btnTtt5_restart_click(e))),document.getElementById("lblTtt5_CurTurn").remove(),document.getElementById("div01").remove();var e=this.storage.special[this.storage.findSpecialById("imgs")].value;for(let t=0;t<e.length;t++)document.getElementById(t.toString()).remove();document.getElementById("divTtt5_gameField").remove(),document.getElementById("btnTtt5_exit").remove(),document.getElementById("btnTtt5_restart").remove(),document.getElementById("divTtt5_menu").remove(),this.storage.removeFromSpecialById("fieldSize"),this.storage.removeFromSpecialById("gameStatus"),this.storage.removeFromSpecialById("currPlayer"),this.storage.removeFromSpecialById("imgHH"),this.storage.removeFromSpecialById("imgWW"),this.storage.removeFromSpecialById("imgs"),this.storage.removeFromSpecialById("gameinf")}btnTtt5_exit_click(e){console.log("btnTtt5_exit_click"),this.remove(),this.storage.gameScreen=s.Screens.tictactoe5_menu,this.storage.toChangeScreen=!0,(0,c.mediator)()}btnTtt5_restart_click(e){console.log("btnTtt5_restart_click");var t=this.storage.special[this.storage.findSpecialById("fieldSize")].value;this.remove(),this.storage.special.push({id:"fieldSize",value:t}),this.storage.toChangeScreen=!0,(0,c.mediator)()}changeTtt5ImgByCount(e,t){var a=this.storage.special[this.storage.findSpecialById("imgs")].value,i=new Image;switch(i=a[t],e){case n.FieldValue.empty:i.src="assets/gameTictaktoe5/tftt5_img01.png";break;case n.FieldValue.playerX:i.src="assets/gameTictaktoe5/ttt5_img02.png";break;case n.FieldValue.playerXwin:i.src="assets/gameTictaktoe5/ttt5_img04.png";break;case n.FieldValue.playerY:i.src="assets/gameTictaktoe5/ttt5_img03.png";break;case n.FieldValue.playerYwin:i.src="assets/gameTictaktoe5/ttt5_img05.png"}}ttt5_checkWin_hor(e,t,a,i){for(var s=0,r=0,n=a;n<a+5;n++){if(0==s&&0!=e[a])s=e[a];else if(0==s||n>=e.length||e[n]!=s)break;if(n<a+4&&Math.floor((n+1)/i)==Math.ceil((n+1)/i))break;t.push(n),r++}return 5==r}ttt5_checkWin_ver(e,t,a,i){for(var s=0,r=0,n=a;n<a+5*i;n+=i){if(0==s&&0!=e[a])s=e[a];else if(n>=e.length||0==s||e[n]!=s)break;if(n<a+4&&Math.floor((n+1)/i)==Math.ceil((n+1)/i))break;t.push(n),r++}return 5==r}ttt5_checkWin_diaMain(e,t,a,i){for(var s=0,r=0,n=a;n<a+5*i+5;n+=i+1){if(0==s&&0!=e[a])s=e[a];else if(n>=e.length||0==s||e[n]!=s)break;if(n<a+5*i+4&&Math.floor((n+1)/i)==Math.ceil((n+1)/i))break;t.push(n),r++}return 5==r}ttt5_checkWin_diaAdd(e,t,a,i){for(var s=0,r=0,n=a;n>a-5*i+5;n-=i-1){if(0==s&&0!=e[a])s=e[a];else if(n<0||0==s||e[n]!=s)break;if(n<a-5*i+4&&Math.floor((n+1)/i)==Math.ceil((n+1)/i))break;t.push(n),r++}return 5==r}ttt5_checkWin_result(e,t){if(1==e){this.storage.special[this.storage.findSpecialById("gameStatus")].value=-2;var a=document.getElementById("divTtt5_menu"),i=document.createTextNode("Congratulations! You win!");a.appendChild(i);for(var s=0;s<t.length;s++)this.changeTtt5ImgByCount(n.FieldValue.playerXwin,t[s]);this.storage.special[this.storage.findSpecialById("currPlayer")].value=-2}else{for(this.storage.special[this.storage.findSpecialById("gameStatus")].value=-1,a=document.getElementById("divTtt5_menu"),i=document.createTextNode("AI win! Good luck next time!"),a.appendChild(i),s=0;s<t.length;s++)this.changeTtt5ImgByCount(n.FieldValue.playerYwin,t[s]);this.storage.special[this.storage.findSpecialById("currPlayer")].value=-1}this.ttt5_curTurn()}ttt5_checkWin(){for(var e,t=this.storage.special[this.storage.findSpecialById("gameinf")].value,a=this.storage.special[this.storage.findSpecialById("fieldSize")].value,i=!1,s=0;s<t.length;s++){if(e=new Array,this.ttt5_checkWin_hor(t,e,s,a)){i=!0;break}if(e=new Array,this.ttt5_checkWin_ver(t,e,s,a)){i=!0;break}if(e=new Array,this.ttt5_checkWin_diaMain(t,e,s,a)){i=!0;break}if(e=new Array,this.ttt5_checkWin_diaAdd(t,e,s,a)){i=!0;break}}i&&this.ttt5_checkWin_result(t[e[0]],e)}ttt5_curTurn(){var e=this.storage.special[this.storage.findSpecialById("currPlayer")].value,t=document.getElementById("lblTtt5_CurTurn");switch(e){case 0:t.innerHTML="Turn: AI. ";break;case 1:t.innerHTML="Turn: You.";break;default:t.innerHTML="Played"}}divTtt5_gameField_click(e){if(console.log("divTtt5_gameField_click"),0==this.storage.special[this.storage.findSpecialById("currPlayer")].value)return;if(this.storage.special[this.storage.findSpecialById("gameStatus")].value<0)return;this.ttt5_curTurn();const t=e.target;var a=Number(t.id),i=this.storage.special[this.storage.findSpecialById("gameinf")].value;0==i[a]&&(i[a]=1,this.changeTtt5ImgByCount(n.FieldValue.playerX,a),this.ttt5_checkWin(),this.storage.special[this.storage.findSpecialById("currPlayer")].value=0,this.storage.special[this.storage.findSpecialById("gameStatus")].value>=0&&this.AITurn())}AITurn(){return i(this,void 0,void 0,(function*(){this.storage.special[this.storage.findSpecialById("gameStatus")].value<0||(this.ttt5_curTurn(),yield this.ai.AITurn(),console.log("now"),this.ttt5_checkWin(),this.storage.special[this.storage.findSpecialById("gameStatus")].value<0?this.storage.special[this.storage.findSpecialById("currPlayer")].value=-1:this.storage.special[this.storage.findSpecialById("currPlayer")].value=1,this.ttt5_curTurn())}))}screen(){console.log("TicTakToe5Screen::screen:"+this.storage.gameScreen),this.makeExit("Tic-Tak-Toe Five"),this.ai=new l.AI(this.storage);var e=this.storage.special[this.storage.findSpecialById("fieldSize")].value;this.storage.special.push({id:"gameStatus",value:0}),console.log("gameStatus:"+this.storage.special[this.storage.findSpecialById("gameStatus")].value),this.storage.special.push({id:"currPlayer",value:Math.floor(2*Math.random())});var t=this.storage.special[this.storage.findSpecialById("currPlayer")].value;console.log("currPlayer:"+this.storage.special[this.storage.findSpecialById("currPlayer")].value);var a,i,s=new Array(e*e);s.fill(0),this.storage.special.push({id:"gameinf",value:s}),(a=document.createElement("div")).setAttribute("id","div01"),(i=document.createElement("label")).setAttribute("id","lblTtt5_CurTurn"),i.innerHTML=0==t?"Turn: AI. ":"Turn: You.",a.appendChild(i),this.storage.mainField.appendChild(a),(a=document.createElement("div")).style.lineHeight="0em",a.setAttribute("id","divTtt5_gameField"),a.addEventListener("click",(e=>this.divTtt5_gameField_click(e)));var r,n,c=new Array(e*e);for(let t=0;t<e*e;t++){if(void 0===n||n>=e-1){var o=document.createElement("br");a.appendChild(o),n=0}else n++;(r=new Image).src="assets/gameTictaktoe5/ttt5_img01.png",r.style.left=a.style.left+n*t+"px",r.setAttribute("id",t),a.appendChild(r),c[t]=r,a.appendChild(r)}this.storage.special.push({id:"imgs",value:c}),r.onload=()=>{this.storage.special.push({id:"imgHH",value:r.height}),this.storage.special.push({id:"imgWW",value:r.width})},this.storage.mainField.appendChild(a),(a=document.createElement("div")).setAttribute("id","divTtt5_menu"),(i=document.createElement("button")).textContent="exit",i.setAttribute("id","btnTtt5_exit"),i.addEventListener("click",(e=>this.btnTtt5_exit_click(e))),a.appendChild(i),(i=document.createElement("button")).textContent="restart",i.setAttribute("id","btnTtt5_restart"),i.addEventListener("click",(e=>this.btnTtt5_restart_click(e))),a.appendChild(i),this.storage.mainField.appendChild(a),0==t&&this.AITurn()}}t.Tictactoe5Screen=o}},t={};!function a(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,a),r.exports}(927)})();